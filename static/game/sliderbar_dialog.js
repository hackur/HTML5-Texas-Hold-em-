function slider_bar_dialog() {	var slider_bar_dialog = {};	var seatObj;	/*	 * <div id="sliderbar_dialog">	 <div id="sliderbar_title">test</div>	 <div id="testdiv">	 <div id="textlabel">	 <p>	 <label for="amount">Amount:</label>	 <label id="sit_dialog_amount"></label>	 </p>	 <p>	 <label>bind:</label>	 <label id="sit_dialog_amount"></label>	 </p>	 </div>	 <div class="sit_slider_bar" >	 <div class="sit_slider_button"></div>	 </div>	 <div id= "sit_slider_textMax">	 <label>Max</label>	 </div>	 <div id= "sit_slider_textMin">	 <label>Min</label>	 </div>	 <div id="submitButton"></div>	 </div>	 </div>	 */	var divSliderBarDialog = $('<div id="sliderbar_dialog"></div>');	var divSliderBarTitle = $('<div id="sliderbar_title"></div>');	var divTextArea = $('<div id="testdiv"></div>');	var divTextLabel = $('<div id="textlabel"></div>');	var LabelAmount = $('<label for="amount">Stake: $</label>');	var LabelAmountNum = $('<label id="sit_dialog_amount"></label>');	var LabelBindAmount = $('<label></label>');	var LabelBindAmountNum = $('<label id="bind_amount"></label>');	var divSliderBar = $('<div class = "sit_slider_bar"></div>');	var divSliderBtn = $('<div id = slider_button class = "sit_slider_button"></div>');	var divSliderTextMin = $('<div id="sit_slider_textMin"></div>');	var divSliderTextMax = $('<div id="sit_slider_textMax"></div>');	var LabelSliderTextMin = $('<label id = "slider_min"></label>');	var LabelSliderTextMax = $('<label id = "slider_max"></label>');	var divSubmitBtn = $('<div id="submitButton" class="GeneralBtn"></div>');	var closeBtn = $('<div class="closeBtn" style="top:57px;left:530px">X</div>');	var amountp = $('<p></p>');	var bindp = $('<p></p>');	var minval, maxval, step;	var cur_stake = 0;	var slider_button ;	var barLeft, barRight;	var seatObj;	var sliderBtnTip = poptip();	var sitBtnTip = poptip();	function draw() {		//add Title		divSliderBarTitle.appendTo(divSliderBarDialog);        closeBtn.appendTo(divSliderBarDialog);        closeBtn.bind("vclick",function(e) {		    hide();        });        //Amount and Bind Label        divTextArea.appendTo(divSliderBarDialog);        divTextLabel.appendTo(divTextArea);        amountp.appendTo(divTextLabel);		LabelAmount.appendTo(amountp);		LabelAmountNum.appendTo(amountp);		bindp.appendTo(divTextLabel);		LabelBindAmount.appendTo(bindp);		LabelBindAmountNum.appendTo(bindp);		//add SliderBar		divSliderBar.appendTo(divTextArea);		divSliderBtn.appendTo(divSliderBar);		//add Text Max&Min		divSliderTextMin.appendTo(divTextArea);		LabelSliderTextMin.appendTo(divSliderTextMin);		divSliderTextMax.appendTo(divTextArea);		LabelSliderTextMax.appendTo(divSliderTextMax);		//add submitBtn		divSubmitBtn.appendTo(divSliderBarDialog);		divSliderBarDialog.appendTo("#sit_down_dialog");		slider_button = divSliderBtn[0];        divSubmitBtn.text(window.textDict["Sit"]);		sliderBtnTip.init($("#sliderBtnTip"), "sliderBtnTip", "Slide the button to change stake", "bottom", 10);		sitBtnTip.init($("#sitBtnTip"), "sitBtnTip", "Click this button to sit down", "bottom", 10);	}		slider_bar_dialog.slider_bar_setTitle = function(Title) {		divSliderBarTitle.html(Title);	};		slider_bar_dialog.init = function() {		//minval = MinVal;		//maxval = MaxVal;		//step = Step;				//var steps = (maxval - minval) / window.room_info.blind;		// / window.room_info.blind;		//var add = Math.round(mouseX / perStep) * window.room_info.blind		//var total = add + window.room_info.min_stake;		//var buttonPos = Math.round(mouseX / perStep) * perStep;				barLeft = divSliderBar.offset().left;		barRight = barLeft + 366;		update(0);				divSliderBarDialog.hide();	};	function update(Position) {		var steps = (maxval - minval) / step + 1;				var perStep = (barRight - barLeft) / steps;		var add = Math.floor(Position / perStep) * step		var total = add + minval;		if(total > maxval)			total = maxval;		if(total < minval)			total = minval;		cur_stake = total;		//console.log(total);		$('#sit_dialog_amount').html(total);		divSliderBtn.css("left", Position - 30 + "px");			}	draw();	function sit_slider_down(e) {		barLeft = divSliderBar.offset().left;		barRight = barLeft + 366;		if(e.target == slider_button) {			slider_button_down = true;			window.addEventListener(event_move, sit_slider_move);			e.preventDefault();		} else {			var m_x = get_event_position(e)[0];			var m_y = get_event_position(e)[1];			var width = divSliderBarDialog.css('width');			width = parseInt(width.slice(0, width.length - 2));			var height = divSliderBarDialog.css('height');			height = parseInt(height.slice(0, height.length - 2));			var left = divSliderBarDialog.offset().left;			var top = divSliderBarDialog.offset().top;			console.log([width, height, left, top]);			if(m_x < left || m_y < top) {				hide();				return;			}			if(m_x > left + width || m_y > top + height) {				hide();				return;			}			e.preventDefault();		}	}	function hide() {		sliderBtnTip.ShowOut();		sitBtnTip.ShowOut();		divSliderBarDialog.hide();		window.removeEventListener(event_down, sit_slider_down);		window.removeEventListener(event_up, 	sit_slider_up);		$("#submitButton").unbind("vclick");	}	slider_bar_dialog.show = function(_seatObj) {				sliderBtnTip.init($("#sliderBtnTip"), "sliderBtnTip", "Slide the button to change stake", "bottom", 10);		sitBtnTip.init($("#sitBtnTip"), "sitBtnTip", "Click this button to sit down", "bottom", 10);		sliderBtnTip.Msg();		sitBtnTip.Msg();		divSliderBarDialog.show();		seatObj = _seatObj;		$("#submitButton").bind("vclick",submitSit);		window.addEventListener(event_down, sit_slider_down);		window.addEventListener(event_up, sit_slider_up);		maxval = Math.min(window.room_info.max_stake,window.user_info.asset);		minval = window.room_info.min_stake;		step = window.room_info.blind;		LabelSliderTextMin.html(minval);		LabelSliderTextMax.html(maxval);		update(0);	}	function sit_slider_move(e) {		var curX = get_event_position(e)[0];		if(curX >= barLeft && curX <= barRight) {			curX -= barLeft;			update(curX);			e.preventDefault();		} else			return;	}	function sit_slider_up() {		removeEventListener(event_move, sit_slider_move);	}	function submitSit() {				var id = seatObj.id;		console.log(cur_stake);		$.ajax({			type: "post",			url: "/sit-down",			data: {seat: id, stake: cur_stake},			success: function(data) {				console.log("Below is sit-down data:");				console.log(data);				if(data.status == "success"){					sit_transit.transit(id);					window.user_info.userIsSat = true;					seatObj.setIsSat(true);				}				else{				}			},			dataType: "json"		});		hide();	};	return slider_bar_dialog;}function slider_bar() {	var slider_bar = {};	var barLeft, barRight;	var maxval, minval, step;	var slider_button;	var divSliderBar = $('<div class = "slider_bar"></div>');	var divSliderBtn = $('<div class = "slider_button"></div>');	// ADDED	//var min_amount	 = $('<span id="min_window_amount"></span>');	//var max_amount	 = $('<span id="max_window_amount"></span>');	var cur_stake;	var divVarible;	slider_bar.create = function(divToAdd, _minval, _maxval, _step) {		divSliderBtn.appendTo(divSliderBar);		divSliderBar.appendTo(divToAdd);		//min_amount.appendTo(divSliderBar);		//max_amount.appendTo(divSliderBar);		//min_amount.text("0");		//max_amount.text("1000");        		barLeft = divSliderBar.offset().left;		barRight = barLeft + 366;		if(arguments.length == 5)			slider_bar.set_argument(_minval, _maxval, _step, arguments[4]);		else			slider_bar.set_argument(_minval, _maxval, _step);				window.addEventListener(event_down, slider_down);		window.addEventListener(event_up, slider_up);				slider_button = divSliderBtn[0];		};	slider_bar.set_argument = function(_minval, _maxval, _step){		maxval = _maxval;		minval = _minval;		step = _step;		if (arguments.length == 4)			update(arguments[3]);		else			update(0);	};		function slider_down(e) {		barLeft = divSliderBar.offset().left;		barRight = barLeft + 366;		if(e.target == slider_button) {			window.addEventListener(event_move, slider_move);			e.preventDefault();		}	}	function slider_up() {		window.removeEventListener(event_move, slider_move);	}		function slider_move(e) {		var curX = get_event_position(e)[0];		//console.log(curX + " " + barLeft + " " + barRight);				if(curX >= barLeft && curX <= barRight) {			curX -= barLeft;			update(curX);		} else			return;	}	function update(Position) {		barLeft = divSliderBar.offset().left;		barRight = barLeft + 366;		var steps = (maxval - minval) / step + 1;				var perStep = (barRight - barLeft) / steps;		var add = Math.floor(Position / perStep) * step		var total = add + minval;		if (total > maxval) 			total = maxval;		if (total < minval)			total = minval;		cur_stake = total;		//divVarible.html(cur_stake);		divVarible(cur_stake);		console.log(total);		//$('#sit_dialog_amount').html(total);		divSliderBtn.css("left", Position - 30 + "px");			}		slider_bar.setPosition = function (left, top) {		divSliderBar.css("left", left);		divSliderBar.css("top", top);	} 	slider_bar.getCurNum = function() {		//console.log(cur_stake);		return cur_stake;	}	slider_bar.setVar = function(ChangeValFunction) {		divVarible = ChangeValFunction;	}	slider_bar.curNum = cur_stake;	return slider_bar;};