<html>
<head>
<script src="./static/jquery.min.js"></script>
</head>
<body>
<div>
<label>username:</label><input name="username" type="text"/><br />
<label>password:</label><input name="password" type="text"/><br />
<button id="login">login</button>
</div>

<div>
<label>room no:</label><input name="room_id" type="text"/><br />
<button id="enter">enter</button>
</div>
<div>
<label>sit no:</label><input name="sit_no" type="text"/><br />
<button id="sit_down">sit down</button>
</div>
</body>
<script>
$(document).ready(function(){
	$('#login').click(function(){
		var username = $('input[name="username"]').val();
		var password = $('input[name="password"]').val();
		$.post(
			"./login",
			{username:username, password:password},
			function(data){
				console.log(data);
			},
			'json'
		);
	});

	$('#enter').click(function(){
		var room = $('input[name="room_id"]').val();
		$.post(
			"./enter",
			{room_id:room},
			function(data){
				console.log(data);
				if(data.status=='success'){
					listenBoardMessage();
				}
			},
			'json'
		);
	});
	$('#sit_down').click(function(){
		var seat = $('input[name="sit_no"]').val();
//		postBoardMessage(message);
		$.ajax({
			type:'post',
			url:"./sit-down",
			data:{seat:seat, offset:1},
			success:function(data){
				console.log(data);
			},
			dataTye:'json',
		});
	});
});
function listenBoardMessage(){
	$.ajax({
		type:'post',
		url:"./listen-board-message",
		data:{offset:1},
		timeout:5000,
		success:function(data){
			console.log("listen board message reply success")
			console.log(data);
			listenBoardMessage();
		},
		error: function(XMLHttpRequest, textStatus, errorThrown) {
			console.log("listen board message reply error")
			console.log(textStatus);
			listenBoardMessage();
		},
		dataTye:'json',
	});
}

function postBoardMessage(message){
}
</script>
</html>
